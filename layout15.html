<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Hibo â€“ The Habit Odyssey (Tailwind Refactor)</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    html, body { margin: 0; padding: 0; }
    .layer {
      position: absolute;
      top: 0; left: 0;
      width: 100%; height: 100vh;
      background-size: cover;
      background-position: center;
      filter: brightness(0.8);
      opacity: 0;
    }
    .text-container {
      position: absolute;
      top: 50%; left: 50%;
      transform: translate(-50%, -50%);
      font-weight: 700;
      text-align: center;
      color: white;
      text-shadow: 0 4px 15px rgba(0,0,0,0.7);
      opacity: 0;
    }
    .text-container .char {
      display: inline-block;
    }
  </style>
</head>
<body class="bg-black text-white overflow-x-hidden">

  <div id="pin-container" class="relative w-full h-screen overflow-hidden"></div>
  
  <section id="cta-section" class="relative w-full h-screen flex flex-col justify-center items-center bg-gradient-to-br from-[#0F0F23] via-[#1A1A2E] to-[#16213E]">
    <h2 class="text-[clamp(2.5rem,6vw,5rem)] mb-4 text-center font-bold">Start Your Journey</h2>
    <p class="text-[clamp(1rem,2vw,1.2rem)] max-w-xl mb-8 text-center">Transform your life through the power of small, consistent habits. Every expert was once a beginner.</p>
    <a href="#" id="cta-button" class="px-8 py-4 text-lg font-bold text-black bg-yellow-400 rounded-full transition-transform hover:scale-105">Begin Your Transformation ðŸš€</a>
    <div id="confetti-container" class="absolute top-0 left-0 w-full h-full overflow-hidden pointer-events-none z-50"></div>
  </section>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>
  <script>
    gsap.registerPlugin(ScrollTrigger);

    const animations = {
      slideUp: chars => gsap.from(chars, { y: 60, opacity: 0, stagger: 0.03, ease: 'power2.out' }),
      scaleIn: chars => gsap.from(chars, { scale: 0.5, opacity: 0, stagger: 0.04, ease: 'back.out(1.7)' }),
      fadeIn: chars => gsap.from(chars, { opacity: 0, stagger: 0.05, ease: 'power1.inOut' }),
      tripleBounce: (chars, container, sceneDuration) => {
        // Center text exactly
        gsap.set(container, { xPercent: -50, yPercent: -50, top: "50%", left: "50%" });

        const tl = gsap.timeline();
        tl.to(container, { opacity: 1, duration: 0.2 });
        tl.addLabel("jump1", sceneDuration / 3);
        tl.addLabel("jump2", (sceneDuration / 3) * 2);
        tl.set(container, { scale: 1 }, 0); // start
        tl.set(container, { scale: 2.2 }, "jump1"); // first jump
        tl.set(container, { scale: 3.4 }, "jump2"); // second jump
        tl.set(container, { scale: 4.5 }, sceneDuration); // final jump
        return tl;
      }
    };

    const storyConfig = {
      scenes: [
        { text: "This is Hibo.", image: "https://images.unsplash.com/photo-1540553016722-983e48a2cd10?w=1920&h=1080&fit=crop", animation: "slideUp" },
        { text: "A burst of motivation.", image: "https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b?w=1920&h=1080&fit=crop", animation: "scaleIn" },
        { text: "He worked harder and harder.", image: "https://images.unsplash.com/photo-1534438327276-14e5300c3a48?w=1920&h=1080&fit=crop", animation: "fadeIn" },
        { text: "Again", image: "https://images.unsplash.com/photo-1568602471122-7832951cc4c5?w=1920&h=1080&fit=crop", animation: "tripleBounce" },
        { text: "He found the secret.", image: "https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=1920&h=1080&fit=crop", animation: "scaleIn" },
        { text: "Start your journey.", image: "https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=1920&h=1080&fit=crop", animation: "slideUp" }
      ]
    };

    const pinContainer = document.getElementById('pin-container');
    const ctaSection = document.getElementById('cta-section');

    const layers = [];
    const textContainers = [];

    storyConfig.scenes.forEach(scene => {
      const layer = document.createElement('div');
      layer.className = 'layer';
      layer.style.backgroundImage = `url('${scene.image}')`;
      pinContainer.appendChild(layer);
      layers.push(layer);

      const textContainer = document.createElement('div');
      textContainer.className = 'text-container text-[clamp(2rem,5vw,4rem)]';
      textContainer.innerHTML = scene.text.split("").map(char => `<span class="char">${char === ' ' ? '&nbsp;' : char}</span>`).join("");
      pinContainer.appendChild(textContainer);
      textContainers.push(textContainer);
    });

    const masterTl = gsap.timeline({
      scrollTrigger: {
        trigger: pinContainer,
        pin: true,
        scrub: 1,
        end: "+=12000"
      }
    });

    storyConfig.scenes.forEach((scene, index) => {
      const layer = layers[index];
      const textContainer = textContainers[index];
      const chars = textContainer.querySelectorAll('.char');

      masterTl.to(layer, { opacity: 1, duration: 1 }, "+=0");
      if (scene.animation === "tripleBounce") {
        const sceneDuration = 3; // proportion for jumps
        masterTl.add(animations.tripleBounce(chars, textContainer, sceneDuration), "<");
        masterTl.to(layer, { scale: 1.05, duration: sceneDuration * 1.5, ease: "none" }, "<"); // slow pan
      } else {
        masterTl.to(textContainer, { opacity: 1, duration: 0.1 }, "<");
        masterTl.add(animations[scene.animation](chars), "<");
        masterTl.to(layer, { scale: 1.2, duration: 2 }, "<");
      }

      masterTl.to({}, { duration: 0.5 });
      if (index < storyConfig.scenes.length - 1) {
        masterTl.to(layer, { opacity: 0, duration: 1 });
        masterTl.to(textContainer, { opacity: 0, duration: 1 }, "<");
      }
    });

    masterTl.to(layers[layers.length - 1], { opacity: 0, duration: 1 });
    masterTl.to(textContainers[textContainers.length - 1], { opacity: 0, duration: 1 }, "<");

    const ctaTl = gsap.timeline({
      scrollTrigger: {
        trigger: ctaSection,
        start: "top 80%",
        toggleActions: "play none none none",
      }
    });

    ctaTl.from(ctaSection, { opacity: 0, scale: 0.9, duration: 1 });
    ctaTl.call(() => {
      if (!ctaSection.dataset.confettiLaunched) {
        launchConfetti();
        ctaSection.dataset.confettiLaunched = "true";
      }
    }, null, ">-0.5");

    function launchConfetti() {
      const container = document.getElementById('confetti-container');
      if (!container) return;
      const colors = ['#FFD700', '#FF6347', '#00BFFF', '#32CD32', '#FF69B4', '#FFFFFF'];
      for (let i = 0; i < 150; i++) {
        const confetti = document.createElement('div');
        confetti.classList.add('confetti');
        confetti.style.position = 'absolute';
        confetti.style.width = '10px';
        confetti.style.height = '15px';
        confetti.style.opacity = 0;
        confetti.style.left = `${Math.random() * 100}%`;
        confetti.style.top = `-20%`;
        confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
        confetti.style.transform = `rotate(${Math.random() * 360}deg)`;
        container.appendChild(confetti);
        gsap.to(confetti, {
          y: '120vh', x: `random(-200, 200)`, rotation: `random(360, 720)`, scale: `random(0.5, 1.5)`,
          opacity: 1, duration: `random(3, 6)`, delay: Math.random() * 2,
          onComplete: () => confetti.remove()
        });
      }
    }
  </script>
</body>
</html>
