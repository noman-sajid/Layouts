<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Hibo â€” Cinematic + Modular Effects</title>

  <!-- Tailwind (optional) and Poppins -->
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@700&display=swap" rel="stylesheet" />

  <style>
    :root { --bg: #000; --accent: #FFD700; }
    html, body {
      height: 100%;
      margin: 0;
      background: var(--bg);
      font-family: 'Poppins', system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      color: #fff;
    }
    #pin-container {
      width: 100%;
      height: 100vh;
      position: relative;
      overflow: hidden;
    }
    .layer {
      position: absolute;
      inset: 0;
      background-size: cover;
      background-position: center;
      filter: brightness(0.82);
      opacity: 0;
      transform-origin: center center;
      will-change: transform, opacity, background-position;
    }
    .dark-overlay {
      position: absolute;
      inset: 0;
      background: rgba(0,0,0,0.32);
      opacity: 0;
      pointer-events: none;
    }
    .text-container {
      position: absolute;
      z-index: 60;
      font-weight: 700;
      font-size: clamp(2rem, 5vw, 4rem);
      text-align: center;
      color: white;
      text-shadow: 0 4px 15px rgba(0,0,0,0.7);
      opacity: 0;
      pointer-events: none;
      transform-origin: center center;
      will-change: transform, opacity;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      text-rendering: optimizeLegibility;
      transform-style: preserve-3d;
      backface-visibility: hidden;
    }
    .text-container .char { display: inline-block; }
    .subtitle {
      position: absolute;
      z-index: 60;
      bottom: 8%;
      left: 50%;
      transform: translateX(-50%);
      font-size: clamp(1rem, 2vw, 1.4rem);
      background: rgba(0,0,0,0.45);
      padding: 0.35rem 0.8rem;
      border-radius: 0.35rem;
      opacity: 0;
      text-shadow: 0 2px 6px rgba(0,0,0,0.8);
      pointer-events: none;
      white-space: nowrap;
    }
    .film-grain {
      position: fixed;
      inset: 0;
      z-index: 90;
      pointer-events: none;
      background-image: url('https://www.transparenttextures.com/patterns/noise.png');
      opacity: 0.12;
    }
    .vignette {
      position: fixed;
      inset: 0;
      z-index: 89;
      pointer-events: none;
      background: radial-gradient(circle, rgba(0,0,0,0) 65%, rgba(0,0,0,0.6) 100%);
    }
    #fade-overlay {
      position: fixed;
      inset: 0;
      background: #000;
      z-index: 95;
      pointer-events: none;
      opacity: 0;
    }
    #scroll-indicator {
      position: absolute;
      bottom: 22px;
      left: 50%;
      transform: translateX(-50%);
      z-index: 80;
      cursor: pointer;
      opacity: 0.95;
    }
    #scroll-indicator svg {
      width: 36px;
      height: 36px;
      animation: bounce 1.4s infinite;
      color: #fff;
    }
    @keyframes bounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-8px); }
    }
    #cta-section {
      position: relative;
      width: 100%;
      height: 100vh;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      background: linear-gradient(135deg, #0F0F23, #1A1A2E, #16213E);
      z-index: 10;
    }
    #cta-button {
      padding: 1rem 2rem;
      border-radius: 40px;
      font-weight: 700;
      background: var(--accent);
      color: #000;
      text-decoration: none;
    }
    #confetti-canvas {
      position: absolute;
      inset: 0;
      z-index: 9999;
      pointer-events: none;
    }
  </style>
</head>
<body>

  <div class="film-grain"></div>
  <div class="vignette"></div>
  <div id="fade-overlay"></div>

  <div id="pin-container">
    <div id="scroll-indicator" title="Scroll">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M19 9l-7 7-7-7"/>
      </svg>
    </div>
  </div>

  <section id="cta-section">
    <h2 style="font-size:clamp(2.5rem,6vw,5rem); margin-bottom:1rem; text-align:center; font-weight:700;">Start Your Journey</h2>
    <p style="max-width:680px; text-align:center; margin-bottom:1.5rem;">Transform your life through the power of small, consistent habits. Every expert was once a beginner.</p>
    <a id="cta-button" href="#">Begin Your Transformation ðŸš€</a>
    <canvas id="confetti-canvas"></canvas>
  </section>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

  <script>
    gsap.registerPlugin(ScrollTrigger);

    // Effect libraries (text and image)
    const textEffects = {
      slideUp: (chars) => gsap.from(chars, { y: 60, opacity: 0, stagger: 0.03, ease: 'power2.out' }),
      scaleIn: (chars) => gsap.from(chars, { scale: 0.5, opacity: 0, stagger: 0.04, ease: 'back.out(1.7)' }),
      fadeIn: (chars) => gsap.from(chars, { opacity: 0, stagger: 0.05, ease: 'power1.inOut' }),
      subtitle: (_, container) => gsap.fromTo(container, { y: 20, opacity: 0 }, { y: 0, opacity: 1, duration: 0.8, ease: 'power2.out' }),
      tripleBounceText: (_, container, tl, opts = {}) => {
        const duration = opts.duration || 3;
        gsap.set(container, { xPercent: -50, yPercent: -50, top: "50%", left: "50%" });
        const timeline = gsap.timeline();
        timeline.set(container, { opacity: 1, scale: 1 }, 0);
        timeline.to({}, { duration: duration / 3 });
        timeline.set(container, { scale: 2.2 }, ">0");
        timeline.to({}, { duration: duration / 3 });
        timeline.set(container, { scale: 3.4 }, ">0");
        timeline.to({}, { duration: duration / 3 });
        timeline.set(container, { scale: 4.5 }, ">0");
        return timeline;
      }
    };

    const imageEffects = {
      fadeIn: (layer, _, opts = {}) => gsap.fromTo(layer, { opacity: 0 }, { opacity: 1, duration: opts.duration || 1, ease: 'power1.out' }),
      kenBurns: (layer, _, opts = {}) => gsap.to(layer, { scale: opts.toScale || 1.06, xPercent: opts.xPercent || -1, duration: opts.duration || 6, ease: 'power1.inOut' }),
      tripleJumpImage: (layer, _, opts = {}) => {
        const duration = opts.duration || 3;
        const timeline = gsap.timeline();
        timeline.set(layer, { scale: 1 }, 0);
        timeline.to({}, { duration: duration / 3 });
        timeline.set(layer, { scale: 1.2 }, ">0");
        timeline.to({}, { duration: duration / 3 });
        timeline.set(layer, { scale: 1.4 }, ">0");
        timeline.to({}, { duration: duration / 3 });
        timeline.set(layer, { scale: 1.6 }, ">0");
        return timeline;
      },
      slowPan: (layer, _, opts = {}) => {
        const start = opts.start || '45%';
        const end = opts.end || '55%';
        gsap.set(layer, { backgroundPositionX: start });
        return gsap.to(layer, { backgroundPositionX: end, duration: opts.duration || 6, ease: 'none' });
      }
    };

    // Story config with attached DOM references placeholder
    const storyConfig = {
      scenes: [
        {
          text: "This is Hibo.",
          subtitle: "The beginning of something great",
          image: "https://images.unsplash.com/photo-1540553016722-983e48a2cd10?w=1920&h=1080&fit=crop",
          textEffects: ["slideUp"],
          imageEffects: ["fadeIn"],
          overlayOpacity: 0.30,
          position: { top: "50%", left: "50%" }
        },
        {
          text: "A burst of motivation.",
          subtitle: "Energy like never before",
          image: "https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b?w=1920&h=1080&fit=crop",
          textEffects: ["scaleIn"],
          imageEffects: ["fadeIn", "kenBurns"],
          overlayOpacity: 0.28,
          position: { top: "20%", left: "50%" }
        },
        {
          text: "He worked harder and harder.",
          subtitle: "Day after day",
          image: "https://images.unsplash.com/photo-1534438327276-14e5300c3a48?w=1920&h=1080&fit=crop",
          textEffects: ["fadeIn", "subtitle"],
          imageEffects: ["fadeIn"],
          overlayOpacity: 0.40,
          position: { top: "80%", left: "50%" }
        },
        {
          text: "Again",
          subtitle: "Relentless effort",
          image: "https://images.unsplash.com/photo-1568602471122-7832951cc4c5?w=1920&h=1080&fit=crop",
          textEffects: ["tripleBounceText"],
          imageEffects: ["tripleJumpImage"],
          overlayOpacity: 0.45,
          position: { top: "50%", left: "50%" }
        },
        {
          text: "He found the secret.",
          subtitle: "Persistence",
          image: "https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=1920&h=1080&fit=crop",
          textEffects: ["scaleIn"],
          imageEffects: ["fadeIn", "slowPan"],
          overlayOpacity: 0.28,
          position: { top: "30%", left: "80%" }
        },
        {
          text: "Start your journey.",
          subtitle: "Yours begins now",
          image: "https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=1920&h=1080&fit=crop",
          textEffects: ["slideUp", "subtitle"],
          imageEffects: ["fadeIn"],
          overlayOpacity: 0.30,
          position: { top: "60%", left: "25%" }
        }
      ]
    };

    const pinContainer = document.getElementById('pin-container');
    const fadeOverlay = document.getElementById('fade-overlay');

    // Build DOM and attach references to scenes
    storyConfig.scenes.forEach(scene => {
      // Create layer
      const layer = document.createElement('div');
      layer.className = 'layer';
      layer.style.backgroundImage = `url('${scene.image}')`;
      layer.style.backgroundPosition = '50% 50%';
      pinContainer.appendChild(layer);
      scene.layer = layer;

      // Create overlay
      const overlay = document.createElement('div');
      overlay.className = 'dark-overlay';
      overlay.style.opacity = 0;
      pinContainer.appendChild(overlay);
      scene.overlay = overlay;

      // Create text container and split chars
      const textWrap = document.createElement('div');
      textWrap.className = 'text-container';
      textWrap.style.top = (scene.position?.top) || "50%";
      textWrap.style.left = (scene.position?.left) || "50%";
      textWrap.style.transform = "translate(-50%, -50%)";
      textWrap.innerHTML = scene.text.split("").map(c => `<span class="char">${c === " " ? "&nbsp;" : c}</span>`).join("");
      pinContainer.appendChild(textWrap);
      scene.textWrap = textWrap;
      scene.chars = textWrap.querySelectorAll('.char');

      // Create subtitle
      const subtitleEl = document.createElement('div');
      subtitleEl.className = 'subtitle';
      subtitleEl.textContent = scene.subtitle || "";
      pinContainer.appendChild(subtitleEl);
      scene.subtitleEl = subtitleEl;
    });

    // Generic effect applier
    function applyEffectByName(name, target, effectDict, tlRef) {
      if (!name) return null;
      const fn = effectDict[name];
      if (!fn) {
        console.warn("Missing effect:", name);
        return null;
      }
      return fn(target, tlRef);
    }

    // Helper for fade transition of scenes
    function fadeSceneInOut(scene, isLastScene = false) {
      const { layer, overlay, textWrap, subtitleEl, chars } = scene;
      const tl = gsap.timeline();

      // Fade to black (cut)
      tl.to(fadeOverlay, { opacity: 1, duration: 0.35 });

      // Setup visible layer & overlay
      tl.set(layer, { opacity: 1, scale: 1, clearProps: "transform" });
      tl.set(overlay, { opacity: scene.overlayOpacity || 0.32 });

      // Fade back from black to reveal
      tl.to(fadeOverlay, { opacity: 0, duration: 0.35 });

      // Image effects (run all in parallel)
      if (Array.isArray(scene.imageEffects)) {
        scene.imageEffects.forEach(effectName => {
          const imgAnim = applyEffectByName(effectName, layer, imageEffects);
          if (imgAnim) tl.add(imgAnim, "<");
        });
      } else {
        // Default gentle scale if none specified
        tl.to(layer, { scale: 1.02, duration: 2, ease: 'power1.out' }, "<");
      }

      // Text reveal: show container opacity immediately
      tl.to(textWrap, { opacity: 1, duration: 0.08 }, "<");

      if (Array.isArray(scene.textEffects)) {
        scene.textEffects.forEach(effectName => {
          const txtAnim = applyEffectByName(effectName, chars, textEffects);
          if (txtAnim) tl.add(txtAnim, "<");
        });
      } else {
        tl.add(textEffects.fadeIn(chars), "<");
      }

      // Show subtitle slightly delayed
      if (subtitleEl && subtitleEl.textContent.trim()) {
        tl.to(subtitleEl, { opacity: 1, duration: 0.45 }, "<+0.2");
      }

      // Hold for readability
      tl.to({}, { duration: 0.9 });

      if (!isLastScene) {
        // Fade out subtitle, text and layer for next scene
        tl.to(subtitleEl, { opacity: 0, duration: 0.35 }, "<");
        tl.to(textWrap, { opacity: 0, duration: 0.6 }, "<");
        tl.to([layer, overlay], { opacity: 0, duration: 0.8 }, "<+0.1");
        tl.set([layer, overlay, textWrap, subtitleEl], { clearProps: "transform,opacity" });
      }

      return tl;
    }

    // Master timeline with ScrollTrigger
    const masterTl = gsap.timeline({
      scrollTrigger: {
        trigger: pinContainer,
        pin: true,
        scrub: 1,
        end: "+=12000"
      }
    });

    // Build master timeline with scene fade in/out sequences
    storyConfig.scenes.forEach((scene, i) => {
      masterTl.add(fadeSceneInOut(scene, i === storyConfig.scenes.length - 1));
    });

    // Ensure fadeOverlay fully hidden at the end
    masterTl.to(fadeOverlay, { opacity: 0, duration: 0.2 });

    // CTA timeline + confetti
    const cta = document.getElementById('cta-section');
    const ctaTl = gsap.timeline({
      scrollTrigger: {
        trigger: cta,
        start: "top 80%",
        toggleActions: "play none none none"
      }
    });

    ctaTl.from(cta, { opacity: 0, scale: 0.95, duration: 0.9 });
    ctaTl.call(() => {
      if (!cta.dataset.confettiLaunched) {
        fireConfettiBurst();
        cta.dataset.confettiLaunched = "true";
      }
    }, null, "+=0.2");

    // Confetti function
    function fireConfettiBurst() {
      const duration = 4 * 1000;
      const animationEnd = Date.now() + duration;
      const defaults = { startVelocity: 30, spread: 360, ticks: 60, zIndex: 9999 };

      function randomInRange(min, max) {
        return Math.random() * (max - min) + min;
      }

      const interval = setInterval(() => {
        const timeLeft = animationEnd - Date.now();

        if (timeLeft <= 0) {
          return clearInterval(interval);
        }

        const particleCount = 50 * (timeLeft / duration);

        // left side burst
        confetti(Object.assign({}, defaults, {
          particleCount,
          origin: { x: 0.1, y: Math.random() * 0.5 + 0.1 },
          colors: ['#ffbf00', '#ffdf00', '#ffd633', '#ffc107']
        }));

        // right side burst
        confetti(Object.assign({}, defaults, {
          particleCount,
          origin: { x: 0.9, y: Math.random() * 0.5 + 0.1 },
          colors: ['#ffbf00', '#ffdf00', '#ffd633', '#ffc107']
        }));
      }, 250);
    }

    // Scroll indicator: smooth scroll to CTA on click
    document.getElementById('scroll-indicator').addEventListener('click', () => {
      cta.scrollIntoView({ behavior: 'smooth' });
    });

  </script>
</body>
</html>
