<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Hibo â€“ The Habit Odyssey (Final)</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@700&display=swap" rel="stylesheet" />
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: 'Poppins', sans-serif;
      background: #000;
      color: white;
      overflow-x: hidden;
    }
    #pin-container {
      width: 100%;
      height: 100vh;
      position: relative;
      overflow: hidden;
    }
    .layer {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100vh;
      opacity: 0;
      background-size: cover;
      background-position: center;
      filter: brightness(0.8);
      transform: scale(1);
    }
    .text-container {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      z-index: 100;
      font-size: clamp(2rem, 5vw, 4rem);
      font-weight: 700;
      text-align: center;
      max-width: 80%;
      color: white;
      text-shadow: 0 4px 15px rgba(0,0,0,0.7);
      opacity: 0; /* The container starts as invisible */
    }
    .text-container .char {
        display: inline-block;
    }
    #cta-section {
      position: relative;
      width: 100%;
      height: 100vh;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      background: linear-gradient(135deg, #0F0F23, #1A1A2E, #16213E);
    }
    #cta-section h2 {
      font-size: clamp(2.5rem, 6vw, 5rem);
      margin-bottom: 1rem;
      text-align: center;
    }
    #cta-section p {
        font-size: clamp(1rem, 2vw, 1.2rem);
        max-width: 600px;
        margin-bottom: 2rem;
        text-align: center;
    }
    #cta-button {
        padding: 1rem 2rem;
        font-size: clamp(1rem, 2vw, 1.2rem);
        font-weight: 700;
        color: #000;
        background-color: #FFD700;
        border-radius: 40px;
        text-decoration: none;
        transition: transform 0.3s ease;
    }
    #cta-button:hover {
        transform: scale(1.05);
    }
    #confetti-container {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        overflow: hidden;
        pointer-events: none;
        z-index: 200;
    }
    .confetti {
        position: absolute;
        width: 10px;
        height: 15px;
        opacity: 0;
    }
  </style>
</head>
<body>

  <div id="pin-container">
    <!-- Scene will be built by JS -->
  </div>
  
  <section id="cta-section">
    <h2>Start Your Journey</h2>
    <p>Transform your life through the power of small, consistent habits. Every expert was once a beginner.</p>
    <a href="#" id="cta-button">Begin Your Transformation ðŸš€</a>
    <div id="confetti-container"></div>
  </section>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>
  
  <script>
    gsap.registerPlugin(ScrollTrigger);

    const storyConfig = {
      scenes: [
        { text: "This is Hibo.", image: "https://images.unsplash.com/photo-1540553016722-983e48a2cd10?w=1920&h=1080&fit=crop" },
        { text: "A burst of motivation.", image: "https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b?w=1920&h=1080&fit=crop" },
        { text: "He worked harder and harder.", image: "https://images.unsplash.com/photo-1534438327276-14e5300c3a48?w=1920&h=1080&fit=crop" },
        { text: "Until he couldn't anymore.", image: "https://images.unsplash.com/photo-1568602471122-7832951cc4c5?w=1920&h=1080&fit=crop" },
        { text: "He found the secret.", image: "https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=1920&h=1080&fit=crop" },
        { text: "Start your journey.", image: "https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=1920&h=1080&fit=crop" }
      ]
    };

    const pinContainer = document.getElementById('pin-container');
    const ctaSection = document.getElementById('cta-section');

    const layers = [];
    const textContainers = [];

    storyConfig.scenes.forEach((scene, index) => {
        const layer = document.createElement('div');
        layer.className = 'layer';
        layer.style.backgroundImage = `url('${scene.image}')`;
        pinContainer.appendChild(layer);
        layers.push(layer);

        const textContainer = document.createElement('div');
        textContainer.className = 'text-container';
        textContainer.innerHTML = scene.text.split("").map(char => `<span class="char">${char === ' ' ? '&nbsp;' : char}</span>`).join("");
        pinContainer.appendChild(textContainer);
        textContainers.push(textContainer);
    });

    const masterTl = gsap.timeline({
        scrollTrigger: {
            trigger: pinContainer,
            pin: true,
            scrub: 1,
            end: "+=12000"
        }
    });

    storyConfig.scenes.forEach((scene, index) => {
        const layer = layers[index];
        const textContainer = textContainers[index];
        const chars = textContainer.querySelectorAll('.char');

        masterTl.to(layer, { opacity: 1, duration: 1 });
        masterTl.to(textContainer, { opacity: 1, duration: 0.1 }, "<");
        
        const animType = index % 3;
        if (animType === 0) {
            masterTl.from(chars, { y: 60, opacity: 0, stagger: 0.03, ease: 'power2.out' }, "<");
        } else if (animType === 1) {
            masterTl.from(chars, { scale: 0.5, opacity: 0, stagger: 0.04, ease: 'back.out(1.7)' }, "<");
        } else {
            masterTl.from(chars, { opacity: 0, stagger: 0.05, ease: 'power1.inOut' }, "<");
        }

        masterTl.to({}, { duration: 0.5 });
        masterTl.to(layer, { scale: 1.2, duration: 2 });

        if (index < storyConfig.scenes.length - 1) {
            masterTl.to(layer, { opacity: 0, duration: 1 });
            masterTl.to(textContainer, { opacity: 0, duration: 1 }, "<");
        }
    });
    
    masterTl.to(layers[layers.length - 1], { opacity: 0, duration: 1 });
    masterTl.to(textContainers[textContainers.length - 1], { opacity: 0, duration: 1 }, "<");

    // --- Animate CTA Section and trigger confetti ---
    const ctaTl = gsap.timeline({
        scrollTrigger: {
            trigger: ctaSection,
            start: "top 80%",
            toggleActions: "play none none none",
        }
    });

    ctaTl.from(ctaSection, { opacity: 0, scale: 0.9, duration: 1 });
    ctaTl.call(() => {
        if (!ctaSection.dataset.confettiLaunched) {
            launchConfetti();
            ctaSection.dataset.confettiLaunched = "true";
        }
    }, null, ">-0.5"); // Call confetti slightly before the animation ends

    function launchConfetti() {
        const container = document.getElementById('confetti-container');
        if (!container) return;
        const colors = ['#FFD700', '#FF6347', '#00BFFF', '#32CD32', '#FF69B4', '#FFFFFF'];
        for (let i = 0; i < 150; i++) {
            const confetti = document.createElement('div');
            confetti.classList.add('confetti');
            confetti.style.left = `${Math.random() * 100}%`;
            confetti.style.top = `-20%`;
            confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
            confetti.style.transform = `rotate(${Math.random() * 360}deg)`;
            container.appendChild(confetti);
            gsap.to(confetti, {
                y: '120vh', x: `random(-200, 200)`, rotation: `random(360, 720)`, scale: `random(0.5, 1.5)`,
                opacity: 1, duration: `random(3, 6)`, delay: Math.random() * 2,
                onComplete: () => confetti.remove()
            });
        }
    }
  </script>
</body>
</html>
