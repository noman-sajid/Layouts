<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Hibo â€“ The Habit Odyssey (Tailwind Refactor)</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    html, body { margin: 0; padding: 0; font-family: 'Inter', sans-serif; } /* Added Inter font */
    .layer {
      position: absolute;
      top: 0; left: 0;
      width: 100%; height: 100vh;
      background-size: cover;
      background-position: center;
      filter: brightness(0.8);
      opacity: 0;
    }
    .text-container {
      position: absolute;
      font-weight: 700;
      text-align: center;
      color: white;
      text-shadow: 0 4px 15px rgba(0,0,0,0.7);
      opacity: 0;
    }
    .text-container .char {
      display: inline-block;
    }
    /* Scroll down indicator animation */
    .scroll-indicator {
      animation: bounce 1.5s infinite;
    }
    @keyframes bounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(6px); }
    }

    /* Custom styles for image animation (beyond inline Tailwind) */
    .image-parallax-left {
        transform: translateZ(0); /* Ensure hardware acceleration */
        transition: transform 0.5s ease-out;
    }
    .image-parallax-right {
        transform: translateZ(0);
        transition: transform 0.5s ease-out;
    }
  </style>
</head>
<body class="bg-black text-white overflow-x-hidden">

  <div id="pin-container" class="relative w-full h-screen overflow-hidden">
    <!-- Scroll Down Indicator -->
    <div id="scroll-indicator" class="absolute bottom-6 left-1/2 transform -translate-x-1/2 z-50 text-white opacity-80 cursor-pointer">
      <svg xmlns="http://www.w3.org/2000/svg" class="scroll-indicator w-8 h-8" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
      </svg>
    </div>
  </div>
  
  <section id="cta-section" class="relative w-full h-screen flex flex-col justify-center items-center bg-gradient-to-br from-[#0F0F23] via-[#1A1A2E] to-[#16213E]">
    <h2 class="text-[clamp(2.5rem,6vw,5rem)] mb-4 text-center font-bold">Start Your Journey</h2>
    <p class="text-[clamp(1rem,2vw,1.2rem)] max-w-xl mb-8 text-center px-4">Transform your life through the power of small, consistent habits. Every expert was once a beginner.</p>
    <a href="#" id="cta-button" class="px-8 py-4 text-lg font-bold text-black bg-yellow-400 rounded-full transition-transform hover:scale-105 active:scale-95 shadow-lg hover:shadow-xl focus:outline-none focus:ring-4 focus:ring-yellow-300">Begin Your Transformation ðŸš€</a>
    <div id="confetti-container" class="absolute top-0 left-0 w-full h-full overflow-hidden pointer-events-none z-50"></div>
  </section>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>
  <script>
    gsap.registerPlugin(ScrollTrigger);

    const animations = {
      // Original ones
      slideUp: chars => gsap.from(chars, { y: 60, opacity: 0, stagger: 0.03, ease: 'power2.out' }),
      scaleIn: chars => gsap.from(chars, { scale: 0.5, opacity: 0, stagger: 0.04, ease: 'back.out(1.7)' }),
      fadeIn: chars => gsap.from(chars, { opacity: 0, stagger: 0.05, ease: 'power1.inOut' }),
      tripleBounce: (chars, container, sceneDuration) => {
        gsap.set(container, { xPercent: -50, yPercent: -50 });
        const tl = gsap.timeline();
        tl.to(container, { opacity: 1, duration: 0.2 });
        tl.addLabel("jump1", sceneDuration / 3);
        tl.addLabel("jump2", (sceneDuration / 3) * 2);
        tl.set(container, { scale: 1 }, 0);
        tl.set(container, { scale: 2.2 }, "jump1");
        tl.set(container, { scale: 3.4 }, "jump2");
        tl.set(container, { scale: 4.5 }, sceneDuration);
        return tl;
      },
      tripleBounceImage: (layer, sceneDuration) => {
        const tl = gsap.timeline();
        tl.addLabel("jump1", sceneDuration / 3);
        tl.addLabel("jump2", (sceneDuration / 3) * 2);
        tl.set(layer, { scale: 1 }, 0);
        tl.set(layer, { scale: 1.2 }, "jump1");
        tl.set(layer, { scale: 1.4 }, "jump2");
        tl.set(layer, { scale: 1.6 }, sceneDuration);
        return tl;
      },

      // New reusable text effects
      fadeUp: chars => gsap.from(chars, { y: 40, opacity: 0, stagger: 0.05, ease: 'power3.out' }),
      zoomRotate: chars => gsap.from(chars, { scale: 0, rotation: 180, opacity: 0, stagger: 0.06, ease: 'back.out(2)' }),
      typeWriter: chars => gsap.from(chars, { opacity: 0, duration: 0.05, stagger: 0.05, ease: 'none' }),
      colorPulse: chars => gsap.fromTo(chars, { color: '#fff' }, { color: '#FFD700', repeat: 3, yoyo: true, duration: 0.2, stagger: 0.05 }),
      blurReveal: chars => gsap.from(chars, { filter: 'blur(10px)', opacity: 0, stagger: 0.04, ease: 'power2.out' }),
      bounceIn: chars => gsap.from(chars, { y: -200, opacity: 0, ease: 'bounce.out', stagger: 0.05 }),
      rotateXIn: chars => gsap.from(chars, { rotationX: -90, opacity: 0, transformOrigin: 'center center', stagger: 0.03, ease: 'power3.out' }),
      slideDown: chars => gsap.from(chars, { y: -60, opacity: 0, stagger: 0.03, ease: 'power2.out' }),
      
      // New reusable image effects
      imageZoomPan: (layer) => gsap.to(layer, { scale: 1.15, x: '-5%', duration: 3, ease: 'power1.inOut' }),
      imageRotateScale: (layer) => gsap.to(layer, { rotation: '5deg', scale: 1.1, duration: 3, ease: 'power2.inOut' }),
      imageParallaxScroll: (layer, direction) => {
        if (direction === 'left') {
          return gsap.to(layer, { x: '-10%', ease: 'none', scrollTrigger: { trigger: layer, start: 'top bottom', end: 'bottom top', scrub: true } });
        } else {
          return gsap.to(layer, { x: '10%', ease: 'none', scrollTrigger: { trigger: layer, start: 'top bottom', end: 'bottom top', scrub: true } });
        }
      }
    };

    const storyConfig = {
      scenes: [
        { text: "This is Hibo.", image: "https://images.unsplash.com/photo-1540553016722-983e48a2cd10?w=1920&h=1080&fit=crop", animation: "bounceIn", imageAnimation: "imageZoomPan", position: { top: "50%", left: "50%" } },
        { text: "A burst of motivation.", image: "https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b?w=1920&h=1080&fit=crop", animation: "rotateXIn", imageAnimation: "imageRotateScale", position: { top: "20%", left: "50%" } },
        { text: "He worked harder and harder.", image: "https://images.unsplash.com/photo-1534438327276-14e5300c3a48?w=1920&h=1080&fit=crop", animation: "blurReveal", imageAnimation: "imageParallaxScroll", imageAnimationDirection: "left", position: { top: "80%", left: "50%" } },
        { text: "Again", image: "https://images.unsplash.com/photo-1568602471122-7832951cc4c5?w=1920&h=1080&fit=crop", animation: "tripleBounce", imageAnimation: "tripleBounceImage", position: { top: "50%", left: "50%" } },
        { text: "He found the secret.", image: "https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=1920&h=1080&fit=crop", animation: "zoomRotate", imageAnimation: "imageZoomPan", position: { top: "30%", left: "80%" } },
        { text: "Start your journey.", image: "https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=1920&h=1080&fit=crop", animation: "slideDown", imageAnimation: "imageRotateScale", position: { top: "60%", left: "25%" } },
        { text: "The Habit Odyssey.", image: "https://images.unsplash.com/photo-1605634509428-f6048d0a8f8e?w=1920&h=1080&fit=crop", animation: "typeWriter", imageAnimation: "imageParallaxScroll", imageAnimationDirection: "right", position: { top: "50%", left: "50%" } }
      ]
    };

    const pinContainer = document.getElementById('pin-container');
    const ctaSection = document.getElementById('cta-section');
    const layers = [];
    const textContainers = [];

    storyConfig.scenes.forEach(scene => {
      const layer = document.createElement('div');
      layer.className = 'layer';
      layer.style.backgroundImage = `url('${scene.image}')`;
      pinContainer.appendChild(layer);
      layers.push(layer);

      const textContainer = document.createElement('div');
      textContainer.className = 'text-container text-[clamp(2rem,5vw,4rem)]';
      textContainer.style.top = scene.position.top;
      textContainer.style.left = scene.position.left;
      textContainer.style.transform = "translate(-50%, -50%)";
      textContainer.innerHTML = scene.text.split("").map(char => `<span class="char">${char === ' ' ? '&nbsp;' : char}</span>`).join("");
      pinContainer.appendChild(textContainer);
      textContainers.push(textContainer);
    });

    const masterTl = gsap.timeline({
      scrollTrigger: {
        trigger: pinContainer,
        pin: true,
        scrub: 1,
        end: "+=14000" // Increased end to accommodate more scenes/animations
      }
    });

    storyConfig.scenes.forEach((scene, index) => {
      const layer = layers[index];
      const textContainer = textContainers[index];
      const chars = textContainer.querySelectorAll('.char');

      masterTl.to(layer, { opacity: 1, duration: 1 }, "+=0"); // Fade in the image layer

      if (scene.animation === "tripleBounce") {
        const sceneDuration = 3;
        masterTl.add(animations.tripleBounce(chars, textContainer, sceneDuration), "<");
        masterTl.add(animations.tripleBounceImage(layer, sceneDuration), "<");
      } else {
        masterTl.to(textContainer, { opacity: 1, duration: 0.1 }, "<"); // Fade in text container
        masterTl.add(animations[scene.animation](chars), "<"); // Add text animation

        // Apply general image animation if specified
        if (scene.imageAnimation && scene.imageAnimation !== "tripleBounceImage") {
          if (scene.imageAnimation === "imageParallaxScroll") {
            // Parallax scroll is handled by ScrollTrigger internally, so we don't add it directly to masterTl here.
            // Instead, we just ensure the layer is ready for it.
          } else {
            masterTl.add(animations[scene.imageAnimation](layer), "<");
          }
        } else {
          // Default image animation if not tripleBounce and no other specific one
          masterTl.to(layer, { scale: 1.2, duration: 2 }, "<");
        }
      }

      // Add a slight pause before the next scene starts or fades out
      masterTl.to({}, { duration: 0.5 }); 
      
      // Fade out the current layer and text, unless it's the last scene
      if (index < storyConfig.scenes.length - 1) {
        masterTl.to(layer, { opacity: 0, duration: 1 });
        masterTl.to(textContainer, { opacity: 0, duration: 1 }, "<");
      }
    });

    // Ensure the very last elements fade out
    masterTl.to(layers[layers.length - 1], { opacity: 0, duration: 1 });
    masterTl.to(textContainers[textContainers.length - 1], { opacity: 0, duration: 1 }, "<");

    // CTA animation
    const ctaTl = gsap.timeline({
      scrollTrigger: {
        trigger: ctaSection,
        start: "top 80%",
        toggleActions: "play none none none",
      }
    });
    ctaTl.from(ctaSection, { opacity: 0, scale: 0.9, duration: 1 });
    ctaTl.call(() => {
      if (!ctaSection.dataset.confettiLaunched) {
        launchConfetti();
        ctaSection.dataset.confettiLaunched = "true";
      }
    }, null, ">-0.5");

    function launchConfetti() {
      const container = document.getElementById('confetti-container');
      if (!container) return;
      const colors = ['#FFD700', '#FF6347', '#00BFFF', '#32CD32', '#FF69B4', '#FFFFFF'];
      for (let i = 0; i < 150; i++) {
        const confetti = document.createElement('div');
        confetti.style.position = 'absolute';
        confetti.style.width = '10px';
        confetti.style.height = '15px';
        confetti.style.opacity = 0;
        confetti.style.left = `${Math.random() * 100}%`;
        confetti.style.top = `-20%`;
        confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
        confetti.style.transform = `rotate(${Math.random() * 360}deg)`;
        container.appendChild(confetti);
        gsap.to(confetti, {
          y: '120vh', x: `random(-200, 200)`, rotation: `random(360, 720)`, scale: `random(0.5, 1.5)`,
          opacity: 1, duration: `random(3, 6)`, delay: Math.random() * 2,
          onComplete: () => confetti.remove()
        });
      }
    }

    // Scroll down indicator click
    document.getElementById('scroll-indicator').addEventListener('click', () => {
      // Scroll by one viewport height
      window.scrollBy({ top: window.innerHeight, behavior: 'smooth' }); 
      // Optionally, you can also scroll directly to the next scene if you calculate its scroll position
    });
  </script>
</body>
</html>
